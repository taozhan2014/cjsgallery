{
  "uri" : "local://9RabA9-VMWBiNaSeB59w5A/",
  "name" : "Default Gallery View",
  "category" : "",
  "parent" : "local://aKevgvw3AB8QcaxfWFUOS9/",
  "pname" : "gallery",
  "flags" : "U",
  "lvars" : [ ],
  "vars" : [ {
    "name" : "htmlTemplate",
    "expr" : {
      "str" : "<html>\n    <head>\n        <link rel=\"stylesheet\" href=\"/resourcelocal://gDJh_RrOy2A5c40fVgZKGE/\">\n        <script src=\"js/knockout-3.2.0.js\"></script>\n        <script src=\"js/jquery.slideup.menu.1.0.js\"></script>\n        <script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js\"></script>\n        <script src=\"js/jquery.dotdotdot.min.js\"></script>\n        \n        <script>\n            Modernizr.load({\n  \t\t\t   test: Modernizr.touch,\n  \t\t\t   yep : ['//s.conceptjs.com/css/jquery.mobile-1.4.5.min.css', '//s.conceptjs.com/js/jquery.mobile-1.4.5.min.js']\n\t\t    });\n        </script>\n        \n        \n        <meta name=\"cjsSaveMode\" content=\"auto\">\n        <meta name=\"cjsHeaderActive\" content=\"yes\">\n    </head>\n\n    <body>\n        <div id=\"fb-root\"></div>\n        <script>(function(d, s, id) {\n            var js, fjs = d.getElementsByTagName(s)[0];\n            if (d.getElementById(id)) return;\n            js = d.createElement(s); js.id = id;\n            js.src = \"//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0\";\n            fjs.parentNode.insertBefore(js, fjs);\n            }(document, 'script', 'facebook-jssdk'));\n        </script>\n\n        <div class=\"container user-profile\" id=\"userProfile\">\n            <div class=\"row\">\n                <div id=\"showcase\" class=\"user-profile-content\" data-bind=\"visible: exhibitDisplay\">\n                    <div class=\"row user-profile-content-header\">\n                        <div class=\"col-md-3\">\n                            <div class=\"header\"><h2><i data-bind=\"attr : {class : exhibitHeaderClass}\"></i><span data-bind=\"text : exhibitHeaderTitle\">Showcase</span></h2></div>\n                        </div>\n                        <div class=\"col-md-4\">\n                            <ul class=\"nav nav-pills\">\n                                <li class=\"user-profile-menu-active\"><a refId=\"all\" headTitle=\"All\" href=\"#\" data-bind=\"click : refreshSubMenu\">All</a></li>\n                                <li><a refId=\"recent\" headTitle=\"Recent\" href=\"#\" data-bind=\"click : refreshSubMenu\">Recently Added</a></li>\n                                <li><a refId=\"popular\" headTitle=\"Popular\" href=\"#\" data-bind=\"click : refreshSubMenu\">Most Popular</a></li>\n                            </ul>\n                        </div>\n                        <div class=\"col-md-5 search\">\n                            <div class=\"right-inner-addon \">\n                                <i refId=\"search\" class=\"fa fa-search fa-lg\" ></i>\n                                <input type=\"text\" class=\"form-control\" id=\"search\" placeholder=\"Search\" data-bind=\"textInput: refreshSearch\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"user-profile-divider\"></div>\n                    <div class=\"row\">\n                        <div class=\"col-sm-9 col-lg-10 col-md-10 wishlist\">\n                            <i class=\"fa fa-lightbulb-o fa-lg\"></i>&nbsp; &nbsp;<a href=\"/view/common/core/qNzaB3q3zP9PnKPs-EkcRC/\" target=\"_blank\">Check our wish-list for ideas of ConceptJS apps</a>\n                            <div data-bind=\"visible: showSwipe\">\n                                <br>\n                                <span>Swipe right on each application to see the detail information</span>\n                            </div>\n                        </div>\n                        <div class=\"col-sm-3 col-lg-2 col-md-2 sociallinks\">\n                            <ul>\n                                <li>\n                                    <div class=\"fb-like\" \n                                        data-href=\"https://www.facebook.com/conceptjs\" \n                                        data-layout=\"button\" \n                                        data-action=\"like\" \n                                        data-show-faces=\"false\" \n                                        data-share=\"false\">\n                                    </div>\n                                </li>\n                                <li>\n                                    <a class=\"twitter-share-button cjs-twitter-button\" href=\"https://twitter.com/lambdazen\"\n                                        data-url=\"https://www.conceptjs.com\" \n                                        data-text=\"Check out ConceptJS to use, build and share web applications directly through the browser\"\n                                        data-hashtags=\"conceptjs\"\n                                        data-count=\"none\"\n                                        data-lang=\"en\">\n                                        Tweet\n                                    </a>\n                                </li>\n                            </ul>\n                        </div>\n                    </div>\n                    <div class = \"row frame\">\n                        <div data-bind=\"visible: noResult\">\n                            <h3>No results are found</h3>\n                        </div>\n                        <div data-bind=\"foreach: {data: showcaseItems, afterRender: afterItemsRendered}\"> \n                            <div class=\"col-xs-12 col-sm-6 col-lg-4 col-md-4\"  >\n                                <div  class=\"row item-wrap\" data-bind=\"attr: {id : uuid}\">\n                                    <a href=\"#\"  data-bind=\"{click: openInViewClick, attr: {title: name}}\">\n                                        <div class=\"cube\" style=\"transform: rotateX(0deg) rotateY(0deg);\">\n                                            <div class=\"face two\">                                                                    \n                                                <img class=\"exhibit-item\" alt=\"\" data-bind=\"attr:{src: imageUrl}\">                                                    \n                                            </div>\n                                            <div class=\"face one\">\n                                            <div class=\"item-info\">\n                                                <div class=\"row\">\n                                                    <div class=\"name ellipsis\" data-bind=\"text: name\"></div>\n                                                </div>\n                                                <div class=\"row\">\n                                                    <div class=\"content\" data-bind=\"text: description\"></div>\n                                                </div>\n                                                <div class=\"row\">\n                                                    <div class=\"col-xs-3\">\n                                                        <img class=\"user-avatar-image-item\"  alt=\"\" data-bind=\"attr:{src: user.photoUrl}\">\n                                                    </div>\n                                                    <div class=\"col-xs-8 header\">\n                                                        <div class=\"row\">\n                                                            <div class=\"author ellipsis\">Created by <span class=\"ellipsis\" data-bind=\"text: user.webName\"></span></div>\n                                                            <div class=\"author\">@ <span class=\"\" data-bind=\"text: creationTime\"></span></div>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                </div>\n                                            </div>                               \n                                        </div>\n                                    </a>\n                                </div>\n                                <div class=\"row item-footer\">\n                                    <div class=\"col-xs-8 top-menu\">\n                                        <div class=\"top-menu-main\">\n                                            <ul class=\"menu\" style=\"display: none;\">\n                                                <li class=\"first\"><a role=\"menuitem\" tabindex=\"-1\" href=\"javascript: void(0)\" data-bind=\"click: openInViewClick\"><span class=\"fa fa-eye fa-fw\"></span>&nbsp;Open in View</a></li>\n                                                <li class=\"\"><a role=\"menuitem\" tabindex=\"-1\" href=\"javascript: void(0)\" data-bind=\"click: openInIDEClick, visible: isLoginUser\"><span class=\"fa fa-pencil fa-fw\"></span>&nbsp;Open in IDE</a></li>\n                                                <li class=\"\"><a role=\"menuitem\" tabindex=\"-1\" href=\"javascript: void(0)\" data-bind=\"click: loveClick, visible: isLoginUser\"><span class=\"fa fa-heart fa-fw\"></span>&nbsp;Love it!</a></li>\n                                                <li class=\"\"><a role=\"menuitem\" tabindex=\"-1\" href=\"javascript: void(0)\" data-bind=\"click: commentClick\"><span class=\"fa fa-twitter-square fa-fw\"></span>&nbsp;Tweet</a></li>\n                                                <li class=\"last edit\" data-bind=\"visible: (isLoginUser() && isOwner())\"><a role=\"menuitem\" tabindex=\"-1\" href=\"javascript: void(0)\" data-bind=\"click: editClick, visible: (isLoginUser() && isOwner())\"><span class=\"fa fa-pencil-square fa-fw\"></span>&nbsp;Edit</a></li>\n                                                <li class=\"last download\" data-bind=\"visible: (isLoginUser() && isDownloadable())\"><a role=\"menuitem\" tabindex=\"-1\" href=\"javascript: void(0)\" data-bind=\"click: downloadClick, visible: (isLoginUser() && isDownloadable())\"><span class=\"fa fa-download fa-fw\"></span>&nbsp;Download to my repo</a></li>                                                \n                                            </ul>\n                                            <a href=\"javascript: return false;\" class=\"menu-item-text\"><span class=\"fa fa-bars fa-lg\"></span></a> \n                                        </div>\n\n                                        <span class=\"name ellipsis\" data-bind=\"text: name\"></span><a class=\"user ellipsis\" data-bind=\"attr: {href: user.webNamePublicUrl, title: user.webNamePublic}\"><span>&nbsp;by </span><span data-bind=\"text: user.webName\"></span></a>\n                                    </div>\n                                    <div class=\"col-xs-4 item-footer-icon\">\n                                        <i class=\"fa fa-comments user-profile-menu-icon\" data-bind=\"click: commentClick, visible: false\"></i><span data-bind=\"text: commentCT, visible: false\"></span>\n                                        <i class=\"fa fa-eye user-profile-menu-icon\" data-bind=\"click: openInViewClick\"></i><span data-bind=\"text: viewCT\"></span>\n                                        <i class=\"fa fa-heart user-profile-menu-icon\" data-bind=\"click: loveClick, visible: isLoginUser\"></i><span data-bind=\"text: loveCT, visible: isLoginUser\"></span>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <script>\n            var urlComp = purl(document.referrer);\n            var tourName = urlComp.param('tour');\n            var intro;\n                                \n            window.twttr = (function (d, s, id) {\n                var t, js, fjs = d.getElementsByTagName(s)[0];\n                if (d.getElementById(id)) return;\n                js = d.createElement(s); js.id = id;\n                js.src= \"https://platform.twitter.com/widgets.js\";\n                fjs.parentNode.insertBefore(js, fjs);\n                return window.twttr || (t = { _e: [], ready: function (f) { t._e.push(f) } });\n            }(document, \"script\", \"twitter-wjs\"));\n            \n            function topBar(message) {\n                $(\"html, body\").animate({ scrollTop: 0 }, \"slow\");\n                $(\"<div />\", { \"class\": 'topbar', text: message }).hide().prependTo(\"body\").slideDown('fast').delay(5000).slideUp(function() { \n                    $(this).remove(); \n                });\n            }\n            \n            function startDownloadIntro(){\n                intro = introJs();\n                intro.setOptions({\n                    steps: [\n                        {\n                            element: document.querySelector('#q-6PbS9Mgu8_Aqjo_GTcHF'),\n                            intro: \"<b>Click</b> the Wish-list/Vote-list app in Editor's Top Picks page. This is an interactive tour, so you must actually click to proceed to the next step!\",\n                            position: \"right\"\n                        }\n                    ],\n                    disableInteraction: false,\n                    'showButtons': false,\n                    'showBullets': false,\n                    tooltipClass: 'cjsTourTooltip'\n                });\n\n                intro.start().onexit(function(){\n                    $cjs.redirect(urlComp.attr('path'), \"_self\", \"NONE\");\n                });\n            }\n\n            function UserModel(username) {\n                var self = this;\n                \n                var user = $cjs.user(username);\n                var userVars = user.vars();\n                \n                var lookupVar = function(varName){\n                    return _.find(userVars, function(userVar){\n                        return userVar.name == varName;\n                    })\n                }\n                \n                var userVar = lookupVar('user');\n                \n                this.username = ko.observable(user.name());\n                this.firstName = ko.observable(userVar.hiddenVars['firstName'].str());\n                this.lastName = ko.observable(userVar.hiddenVars['lastName'].str());\n                this.email = ko.observable(lookupVar('email').expr.str());\n                this.isEmailPublic = ko.observable(userVar.hiddenVars['isEmailPublic'].bool());\n                this.displayName = ko.observable(userVar.hiddenVars['displayName'].str());\n                this.location = ko.observable(userVar.hiddenVars['location'].str());\n                this.website = ko.observable(userVar.hiddenVars['website'].str());\n                this.bio = ko.observable(userVar.hiddenVars['bio'].str());\n                this.photoUrl = ko.observable(lookupVar('photoUrl').expr.str());\n                this.headerBGUrl = ko.observable(lookupVar('headerBGUrl').expr.str());\n                this.twitterHandle = ko.observable((userVar.hiddenVars['twitterHandle'])?userVar.hiddenVars['twitterHandle'].str():\"\");\n                \n                this.webName = ko.computed(function(){\n                    var capFirst = function(str){\n                        return str.charAt(0).toUpperCase() + str.slice(1);\n                    }\n\n                    if (this.displayName()){\n                        return this.displayName();\n                    }else if (this.firstName() ||\n                                this.lastName()){\n                        return ((this.firstName())?capFirst(this.firstName()):'') + ' ' + ((this.lastName())?capFirst(this.lastName()):'');\n                    }else{\n                        return this.username();\n                    }\n                }, this);\n                \n                this.webNamePublic = ko.computed(function() {\n                    return this.webName() + ' public page';\n                }, this);\n                \n                this.webNamePublicUrl = ko.computed(function() {\n                    return '/view/'+this.username() + '/public/';\n                }, this);\n                \n                this.headerBG = ko.computed(function(){\n                    return \"background-image: url(\"+self.headerBGUrl()+\");\";\n                }, this);\n            }\n            \n            function popupwindow(url, title, w, h) {\n                var left = (screen.width/2)-(w/2);\n                var top = (screen.height/2)-(h/2);\n                var win = window.open(url, '_blank', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);\n                if (win){\n                    win.focus();\n                }\n            } \n            \n            function ExhibitItemVM(searchResult){\n                var self = this;\n                \n                this.uri = ko.observable(searchResult._source.uri);\n                this.name = ko.observable(searchResult._source.exhibitName);\n                this.creationTime = ko.observable(searchResult._source.creationTime);\n                this.description = ko.observable(searchResult._source.description);\n                this.imageUrl = ko.observable(searchResult._source.imageUrl);\n                this.seedUri = ko.observable(searchResult._source.seedUri);\n                this.viewCT = ko.observable(searchResult._source.viewCT);\n                this.commentCT = ko.observable(searchResult._source.commentCT);\n                this.loveCT = ko.observable(searchResult._source.loveCT);\n                this.owner = ko.observable(searchResult._source.owner);\n                this.lovedUsers = ko.observableArray(searchResult._source.lovedUsers);\n                this.isDownloadable = ko.observable(searchResult._source.isDownloadable);\n                this.conceptUri = ko.observable(searchResult._source.conceptUri);\n                \n                this.uuid = ko.computed(function(){\n                    var uriComp = purl(this.uri());\n                    return uriComp.segment()[2];\n                }, this)\n                \n                this.user = new UserModel(this.owner());\n                \n                this.isOwner = ko.computed(function(){\n                    return $cjs.currentUser == self.owner();\n                }, this)\n                \n                this.isDownloadable = ko.computed(function(){\n                    return ($cjs.currentUser != self.owner()) && self.isDownloadable();\n                }, this)\n                \n                this.isLoginUser = ko.computed(function(){\n                    return ($cjs.currentUser) && ($cjs.currentUser != \"Guest\");\n                }, this)\n                \n                this.conceptUrl = ko.computed(function(){\n                    return $cjs.convertUriToView(searchResult._source.conceptUri);\n                }, this);\n                \n                this.openInViewClick = function(data, env){\n                    var redirectUrl = searchResult._source.conceptUri\n                    if (tourName && tourName == \"download\"){\n                        intro.exit();\n                        $cjs.redirect(urlComp.attr('path'), \"_self\", \"NONE\");\n                        redirectUrl = redirectUrl+\"?tour=download&multipage=2\";\n                    }\n                    $cjs.redirect(redirectUrl, '_blank');\n                    $(env.target).trigger('mouseout');\n                    var exhibit = $cjs(searchResult._id).as($cjs.uris.exhibit);\n                    exhibit.execute('updateViewCT', [], \n                        function(){                    \n                            self.viewCT(self.viewCT()+1);\n                        },\n                        function(jqXHR, textStatus, errorThrown){\n                            console.log(\"execute proxy method updateViewCT failed, status:\" + textStatus + \", error:\" + errorThrown + \", server response:\" + ((jqXHR.responseText)?jqXHR.responseText:\"\"));\n                        });\n                };\n                \n                this.openInIDEClick = function(data, env){\n                    $(env.target).trigger('mouseout');\n                    $cjs.redirect(searchResult._source.conceptUri, '_blank', \"IDE\");\n                };\n                \n                this.loveClick = function(data, env){\n                    $(env.target).trigger('mouseout');\n                    var exhibit = $cjs(searchResult._id).as($cjs.uris.exhibit);\n                    exhibit.execute('updateLoveCT', [], \n                        function(successful){   \n                            if (successful){\n                                self.loveCT(self.loveCT()+1);\n                            }\n                        },\n                        function(jqXHR, textStatus, errorThrown){\n                            console.log(\"execute proxy method updateLoveCT failed, status:\" + textStatus + \", error:\" + errorThrown + \", server response:\" + ((jqXHR.responseText)?jqXHR.responseText:\"\"));\n                        });\n                };\n                \n                this.commentClick = function(data, env){\n                    $(env.target).trigger('mouseout');\n                    var exhibit = $cjs(searchResult._id).as($cjs.uris.exhibit);\n                    exhibit.execute('updateCommentCT', [], \n                        function(successful){                    \n                            popupwindow(\"https://twitter.com/intent/tweet?text=Check+out+\\\"\"+encodeURIComponent(self.name())+\"\\\"+here:+\" + encodeURIComponent(\"https://web.conceptjs.com/view\"+self.conceptUri())+\"&via=\"+self.user.twitterHandle()+\"&hashtags=conceptjs\",\"ConceptJS Exhibit\", 550, 420);\n                            self.commentCT(self.commentCT()+1);\n                        },\n                        function(jqXHR, textStatus, errorThrown){\n                            console.log(\"execute proxy method updateCommentCT failed, status:\" + textStatus + \", error:\" + errorThrown + \", server response:\" + ((jqXHR.responseText)?jqXHR.responseText:\"\"));\n                        });\n                };\n                \n                this.editClick = function(data, env){\n                    $(env.target).trigger('mouseout');\n                    $cjs.redirect(searchResult._source.uri);\n                };\n                \n                this.downloadClick = function(data, env){\n                    $(env.target).trigger('mouseout');\n                    \n                    var downloadUri = (self.seedUri())?self.seedUri():self.conceptUri();\n                    \n                    var userDefault = $cjs($cjs.repo(\"/\"+$cjs.currentUser+\"/default/\").uri).as($cjs.uris.userDefaultRepoView);\n                    userDefault.execute('downloadItem', [downloadUri], \n                        function(data){                    \n                            if (data){   \n                                $cjs.redirect(data);\n                            }\n                        },\n                        function(jqXHR, textStatus, errorThrown){\n                            console.log(\"execute proxy method updateLoveCT failed, status:\" + textStatus + \", error:\" + errorThrown + \", server response:\" + ((jqXHR.responseText)?jqXHR.responseText:\"\"));\n                        });\n                };\n            }\n            \n            function UserProfileVM(){\n                var self = this;\n                \n                this.showcaseItems = ko.observableArray();\n                \n                this.currentSearchJson = ko.observable(\"\");\n                this.currentSortJson = ko.observable(\"\");\n                \n                this.showcase = ko.observable(true);\n                this.favorite = ko.observable(false);\n                this.blog = ko.observable(false);\n                this.noResult = ko.observable(false);\n                this.exhibitHeaderTitle = ko.observable(\"\");\n                this.exhibitHeaderClass = ko.observable(\"\");\n                \n                this.exhibitDisplay = ko.computed(function(){\n                    return self.showcase || self.favorite\n                }, this);\n                \n                this.showSwipe = ko.observable(false);\n                \n                this.refreshMenu = function(data, event){\n                    var id = null;\n                    if (event){\n                        id = event.target.getAttribute('refId');\n                        $(\".user-profile-menu ul li\").removeClass(\"user-profile-menu-active\");\n                        $(event.target).parent().addClass(\"user-profile-menu-active\");\n                    }\n                    \n                    if (!id || (id == \"showcase\")){\n                        self.blog(false);\n                        self.exhibitHeaderTitle(\"EDITORS' TOP PICKS\");\n                        self.exhibitHeaderClass(\"fa fa-trophy fa-large user-profile-menu-icon\");\n                        self.showcase(true);\n                        self.favorite(false);\n                        self.refreshSubMenu();\n                    }else if (id == \"favorite\"){\n                        self.blog(false);\n                        self.exhibitHeaderTitle(\"Faverite\");\n                        self.exhibitHeaderClass(\"fa fa-heart user-profile-menu-icon\");\n                        self.showcase(false);\n                        self.favorite(true);\n                        self.refreshSubMenu();\n                    }\n                };\n                \n                this.afterItemsRendered = function(element, index, data){\n                    \n                    \n                    $(\".top-menu\").slideupmenu({\n                        slideUpSpeed: 50, \n                        slideDownSpeed: 200, \n                        ease: \"easeOutQuad\", \n                        stopQueue: true\n                    });                      \n                    $(\"div.content\").dotdotdot();\n                };\n                \n                this.refresh = function(parentSearch, searchJson, sortJson){\n                    var processSearchJson;\n                    var userSearch;\n                    var searchArray = [];\n                    userSearch = {\n                        \"term\" : {\n                            \"isEditorPicked\" : true\n                        }\n                    }\n\n                    searchArray.push(userSearch);\n                    if (parentSearch){\n                        searchArray.push(parentSearch);\n                    }\n                    searchArray.push(searchJson);\n                    processSearchJson = {\n                        \"bool\" : {\n                            \"must\" : searchArray\n                        }\n                    }\n\n                    //console.log(\"search json:\"+JSON.stringify(processSearchJson));\n                    $cjs.search({\n                        uri: $cjs.uris.exhibitIndexEntryType,\n                        queryJson: processSearchJson,\n                        sortJson: sortJson,\n                        done : function(data){\n                            //console.log(\"search data:\"+JSON.stringify(data));\n                            self.showcaseItems.removeAll();\n                            if (data.hits.total > 0){   \n                                self.noResult(false);\n                                _.each(data.hits.hits, function(x){\n                                    if (x._source.regenerateThumbnail){\n                                        var exhibit = $cjs(x._id).as($cjs.uris.exhibit);\n                                        if (exhibit.prop('regenerateThumbnail').val()){\n                                            exhibit.execute('updateImageUrlWithThumbnail', []);\n                                            $cjs.clearCache();\n                                        }\n                                    }\n\n                                    self.showcaseItems.push(new ExhibitItemVM(x));\n                                });\n                                registerCubeEvent();\n                                \n                                if (tourName && tourName == \"download\"){\n                                    setTimeout(function(){ \n                                        startDownloadIntro();\n                                    }, 1000);\n                                }\n                            }else{\n                                self.noResult(true);\n                            }\n                        },\n                        fail : function(jqXHR, textStatus, errorThrown){\n                            console.log(\"failed to search concept value, response:\"+jqXHR.responseText);\n                        }\n                    })\n                }\n                \n                this.refreshSearch = ko.pureComputed({\n                    read: function(){\n                        return \"\";\n                    },\n                    write: function(data){\n                        var searchJson;\n                        if (data){\n                            searchJson = {\n                                \"query_string\": { \n                                    \"query\" : data\n                                }\n                            };\n                        }else{\n                            searchJson = {\n                                \"match_all\": { }\n                            };\n                        }\n                        self.refresh(self.currentSearchJson(), searchJson, self.currentSortJson());\n                    },\n                    owner: this\n                });\n                \n                this.refreshSubMenu = function(data, event){\n                    var id = null;\n                    if (event){\n                        id = event.target.getAttribute('refId');\n                        $(\".user-profile-content-header ul li\").removeClass(\"user-profile-menu-active\");\n                        $(event.target).parent().addClass(\"user-profile-menu-active\");\n                    }\n                    \n                    var searchJson;\n                    var sortJson;\n                    if (!id || (id == \"all\")){\n                        searchJson = {\n                            \"match_all\": { }\n                        };\n                        sortJson = [{\"field\" : \"creationTime\", \"order\" : \"DESC\"}];\n                    }else if (id == \"recent\"){\n                        searchJson = {\n                            \"range\": { \n                                \"creationTime\" : {\n                                    \"gte\" : \"now-30d\"\n                                }\n                            }\n                        };\n                        sortJson = [{\"field\" : \"creationTime\", \"order\" : \"DESC\"}];\n                    }else if (id == \"popular\"){\n                        searchJson = {\n                            \"range\": { \n                                \"popularIndex\" : {\n                                    \"gte\" : 0.3\n                                }\n                            }\n                        };\n                        sortJson = [{\"field\" : \"popularIndex\", \"order\" : \"DESC\"}];\n                    }\n                    \n                    self.currentSearchJson(searchJson);\n                    self.currentSortJson(sortJson);\n                    $(\"#search\").val(\"\");\n \n                    self.refresh(null, searchJson, sortJson);                      \n                };\n            }\n            \n            var userProfileVM = new UserProfileVM();\n            ko.applyBindings(userProfileVM);\n            \n            function registerCubeEvent(){\n                var props = 'transform WebkitTransform MozTransform OTransform msTransform'.split(' '),\n                prop,\n                el = document.createElement('div');\n\n                for(var i = 0, l = props.length; i < l; i++) {\n                    if(typeof el.style[props[i]] !== \"undefined\") {\n                        prop = props[i];\n                        break;\n                    }\n                }\n                \n                function cubeMouseLeave(evt){\n                    var xAngle = 0;\n                    var yAngle = 0;\n                    evt.preventDefault();\n                    (evt.target.getElementsByClassName(\"cube\"))[0].style[prop] = \"rotateX(\"+xAngle+\"deg) rotateY(\"+yAngle+\"deg)\";\n                }\n                \n                function cubeMouseEnter(evt){\n                    var xAngle = -90;\n                    var yAngle = 0;\n                    evt.preventDefault();\n \n                    (evt.target.getElementsByClassName(\"cube\"))[0].style[prop] = \"rotateX(\"+xAngle+\"deg) rotateY(\"+yAngle+\"deg)\";\n                }\n                \n                if (Modernizr.touch) {\n                    setTimeout(function(){\n                        $(\"div.item-wrap\").on(\"swipeleft\", cubeMouseLeave);\n                        $(\"div.item-wrap\").on(\"swiperight\", cubeMouseEnter);\n                    \n                        userProfileVM.showSwipe(true);\n                    }, 3000);\n                }else{\n                    $(\"div.item-wrap\").mouseleave(cubeMouseLeave);\n                    $(\"div.item-wrap\").mouseenter(cubeMouseEnter);\n                }\n            }\n            \n            $(document).ready(function(){\n                userProfileVM.refreshMenu();  \n                                \n                // handle the mouseenter functionality\n                $(\"#slideUpInfo .img\").mouseenter(function(){\n                    $(this).addClass(\"hover\");\n                })\n                // handle the mouseleave functionality\n                .mouseleave(function(){\n                    $(this).removeClass(\"hover\");\n                });    \n                \n                                    \n                $(\"div.bio\").dotdotdot();\n            });\n        </script>\n    </body>\n</html>",
      "strEditMode" : "html"
    }
  }, {
    "name" : "_page_propertyMap",
    "expr" : {
      "script" : "return {};"
    }
  }, {
    "name" : "page",
    "expr" : {
      "concept" : "/common/core/Xfh2VQ4HSK9klqbqqR-eBB/",
      "conceptName" : "Mustache HTML Page",
      "bindings" : {
        "htmlTemplate" : "htmlTemplate",
        "propertyMap" : "_page_propertyMap"
      }
    }
  } ],
  "isas" : [ {
    "var" : "page"
  } ],
  "isLambda" : false,
  "activeScript" : "",
  "digest" : "R+GrapYmWzpaz8RFPJMcEw=="
}